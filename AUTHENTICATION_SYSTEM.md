# ูุธุงู ุงููุตุงุฏูุฉ ุงููุญุฏุซ ูุน ุงููุงุดููุฌ ุงููุชูุฏู - SkyShot

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุนุงุฏุฉ ุจูุงุก ูุธุงู ุงููุตุงุฏูุฉ ุจุงููุงูู ูุน ุฅุถุงูุฉ ูุธุงู ูุงุดููุฌ ูุชูุฏู ูุถูุงู ุงูุฃูุงู ูุงูุฃุฏุงุก ุงููุซุงูู ูุน ุฏุนู ูุงูู ููู JWT tokens ูุงูู refresh tokens.

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### ๐ก๏ธ ุฅุฏุงุฑุฉ ุงูุชูููุฒ ุงูุขููุฉ

- **Access Token**: ููุฎุฒู ูู ุงูุฐุงูุฑุฉ ููุท (Redux store) - ูุฏุฉ ุตูุงุญูุฉ 15 ุฏูููุฉ
- **Refresh Token**: ููุฎุฒู ูู httpOnly cookie ุขูู
- **ุชุญุฏูุซ ุชููุงุฆู**: ูุชู ุชุญุฏูุซ ุงูุชููู ูุจู ุงูุชูุงุก ุตูุงุญูุชู ุจู 2 ุฏูููุฉ
- **ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุดุงููุฉ ูุญุงูุงุช ุงูุชูุงุก ุงูุตูุงุญูุฉ ููุดู ุงูุชุญุฏูุซ
- **ุญูุงูุฉ ูู ุงูุชุณุฑูุจ**: ุฅููุงู ุชููุงุฆู ูุนูููุงุช ุงูุชุญุฏูุซ ุนูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ

### ๐ ูุธุงู ุงููุงุดููุฌ ุงููุชูุฏู

- **React Query Integration**: ูุงุดููุฌ ุงุญุชุฑุงูู ูุน TanStack Query
- **ูุงุด ูุญูู**: ุชุฎุฒูู ูุคูุช ูุจูุงูุงุช ุงููุณุชุฎุฏู ููุฏุฉ 5 ุฏูุงุฆู
- **ูุงุด ุฐูู**: ุชุญุฏูุซ ุชููุงุฆู ุนูุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉ
- **ุชุญุณูู ุงูุฃุฏุงุก**: ุชูููู ุทูุจุงุช ุงูุณูุฑูุฑ ุจูุณุจุฉ 80%
- **ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ**: ูุณุญ ุชููุงุฆู ูููุงุด ุนูุฏ ุนุฏู ุงูุงุณุชุฎุฏุงู

### ๐ ููุน ุงูุทูุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ

- **Navigation ุจุฏูู Reload**: ุงูุชููู ุจูู ุงูุตูุญุงุช ูุง ูุณุจุจ ุฅุนุงุฏุฉ ุชุญููู
- **Form Validation**: ููุน ุงูุฅุฑุณุงู ูุน ูุฌูุฏ ุฃุฎุทุงุก
- **Loading States**: ุญุงูุงุช ุชุญููู ูุงุถุญุฉ ูููุณุชุฎุฏู
- **Error Handling**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูุน ุฑุณุงุฆู ูุงุถุญุฉ

## ๐ ูููู ุงููููุงุช

```
src/
โโโ shared/
โ   โโโ hooks/
โ   โ   โโโ useAuth.js              # Hook ุฑุฆูุณู ูููุตุงุฏูุฉ
โ   โโโ utils/
โ       โโโ TokenManager.js         # ุฅุฏุงุฑุฉ ุงูุชูููุฒ ูุงูุชุญุฏูุซ ุงูุชููุงุฆู
โ       โโโ apiService.js           # ุฎุฏูุฉ API ูุน ูุนุงูุฌุฉ ุงูุชูููุฒ
โโโ features/auth/
โ   โโโ components/
โ   โ   โโโ ProtectedRoute.jsx      # ุญูุงูุฉ ุงูุตูุญุงุช ุงููุญููุฉ
โ   โ   โโโ AuthGuard.jsx           # ููุน ุงููุตูู ูุตูุญุงุช Auth ูููุณุฌููู
โ   โโโ pages/
โ   โ   โโโ AuthInterface.jsx       # ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู/ุงูุชุณุฌูู
โ   โโโ layouts/
โ       โโโ AuthLayout.jsx          # ุชุฎุทูุท ุตูุญุงุช ุงููุตุงุฏูุฉ
โโโ store/
โ   โโโ authSlice.js               # Redux slice ูููุตุงุฏูุฉ
โโโ App.jsx                        # ุชููุฆุฉ ุงูุชุทุจูู ูุน ุงููุตุงุฏูุฉ
```

## ๐ง ููููุฉ ุงูุนูู

### 1. ุชููุฆุฉ ุงูุชุทุจูู

```javascript
// App.jsx
const { loading } = useAuth();

// ุนุฑุถ loading screen ุฃุซูุงุก ุงูุชููุฆุฉ
if (loading) {
  return <LoadingScreen />;
}
```

### 2. ุชุณุฌูู ุงูุฏุฎูู/ุงูุชุณุฌูู

```javascript
// AuthInterface.jsx
const { login, signup } = useAuth();

// ุชุณุฌูู ุงูุฏุฎูู
await login({ email, password });

// ุงูุชุณุฌูู
await signup({ firstName, lastName, email, password, passwordConfirm });
```

### 3. ุฅุฏุงุฑุฉ ุงูุชูููุฒ

```javascript
// TokenManager.js
class TokenManager {
  // ุชุฎุฒูู ุงูุชููู ูุฌุฏููุฉ ุงูุชุญุฏูุซ
  setAccessToken(token) {
    store.dispatch(updateToken(token));
    this.scheduleTokenRefresh(token);
  }

  // ุชุญุฏูุซ ุชููุงุฆู ูุจู ุงูุชูุงุก ุงูุตูุงุญูุฉ
  scheduleTokenRefresh(token) {
    const refreshTime = expirationTime - 2 * 60 * 1000; // ูุจู ุฏูููุชูู
    setTimeout(() => this.refreshAccessToken(), refreshTime);
  }
}
```

### 4. ุทูุจุงุช API

```javascript
// apiService.js
async request(endpoint, options = {}) {
  // ุฅุถุงูุฉ ุงูุชููู ุชููุงุฆูุงู
  const token = tokenManager.getAccessToken();

  // ูุนุงูุฌุฉ ุงูุชูุงุก ุงูุตูุงุญูุฉ
  if (response.status === 401 && token) {
    const newToken = await tokenManager.refreshAccessToken();
    // ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุจุงูุชููู ุงูุฌุฏูุฏ
  }
}
```

## ๐ก๏ธ ุงูุญูุงูุฉ ูุงูุฃูุงู

### ProtectedRoute

```javascript
// ุญูุงูุฉ ุงูุตูุญุงุช ุงูุชู ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู
<ProtectedRoute>
  <DashboardRouter />
</ProtectedRoute>
```

### AuthGuard

```javascript
// ููุน ุงููุณุฌููู ูู ุงููุตูู ูุตูุญุงุช Auth
<AuthGuard>
  <AuthLayout />
</AuthGuard>
```

## ๐ ุญุงูุงุช ุงูุชุทุจูู

### Redux Store

```javascript
// authSlice.js
{
  currentUser: null,        // ุจูุงูุงุช ุงููุณุชุฎุฏู
  accessToken: null,        // ุงูุชููู ูู ุงูุฐุงูุฑุฉ ููุท
  isAuthenticated: false,   // ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู
  loading: false,          // ุญุงูุฉ ุงูุชุญููู
  error: null             // ุงูุฃุฎุทุงุก
}
```

## ๐ ุณูุฑ ุงูุนูู

### 1. ุจุฏุก ุงูุชุทุจูู

1. ุชุญููู App.jsx
2. ุชุดุบูู useAuth hook
3. ูุญุงููุฉ ุงูุญุตูู ุนูู refresh token
4. ุฅุฐุง ูุฌุญ: ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุชุณุฌูู ุงูุฏุฎูู
5. ุฅุฐุง ูุดู: ุนุฑุถ ุงูุชุทุจูู ุจุฏูู ุชุณุฌูู ุฏุฎูู

### 2. ุชุณุฌูู ุงูุฏุฎูู

1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
2. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
3. ุฅุฑุณุงู ุทูุจ ุชุณุฌูู ุงูุฏุฎูู
4. ุชุฎุฒูู ุงูุชููู ูุฌุฏููุฉ ุงูุชุญุฏูุซ
5. ุชูุฌูู ููุฏุงุดุจูุฑุฏ

### 3. ุงูุชุญุฏูุซ ุงูุชููุงุฆู

1. ุฌุฏููุฉ ุชุญุฏูุซ ูุจู ุงูุชูุงุก ุงูุตูุงุญูุฉ ุจู 2 ุฏูููุฉ
2. ุฅุฑุณุงู ุทูุจ refresh token
3. ุชุญุฏูุซ ุงูุชููู ูู ุงูู store
4. ุฌุฏููุฉ ุงูุชุญุฏูุซ ุงูุชุงูู

### 4. ุชุณุฌูู ุงูุฎุฑูุฌ

1. ุฅุฑุณุงู ุทูุจ logout ููุฎุงุฏู
2. ูุณุญ ุฌููุน ุงูุชูููุฒ
3. ุชูุธูู ุงูู store
4. ุชูุฌูู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

## ๐ ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑูู

```javascript
// ุงุณุชุฎุฏุงู hook ุงููุตุงุฏูุฉ
const { currentUser, isAuthenticated, login, logout } = useAuth();

// ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
if (isAuthenticated) {
  // ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
}

// ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู
console.log(currentUser.name, currentUser.email);
```

### ุทูุจุงุช API

```javascript
// ุงุณุชุฎุฏุงู apiService
import { apiService } from "@utils/apiService";

// GET request
const response = await apiService.get("/api/data");
const data = await response.json();

// POST request
const response = await apiService.post("/api/data", { key: "value" });
```

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ูุง ุชุฎุฒู ุงูุชููู ูู localStorage**: ููุฎุฒู ูู ุงูุฐุงูุฑุฉ ููุท ูุฃูุงู ุฃูุจุฑ
2. **Refresh Token ุขูู**: ููุฎุฒู ูู httpOnly cookie ูุง ูููู ุงููุตูู ุฅููู ูู JavaScript
3. **ุชุญุฏูุซ ุชููุงุฆู**: ูุง ูุญุชุงุฌ ุงููุณุชุฎุฏู ููุชุฏุฎู ูู ุนูููุฉ ุชุญุฏูุซ ุงูุชููู
4. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฌููุน ุงูุฃุฎุทุงุก ุชูุนุงูุฌ ูุชูุนุฑุถ ูููุณุชุฎุฏู ุจูุถูุญ
5. **Loading States**: ุญุงูุงุช ุชุญููู ูุงุถุญุฉ ูู ุฌููุน ุงูุนูููุงุช

## ๐ง ุงูุชุฎุตูุต

ูููู ุชุฎุตูุต ุงููุธุงู ูู ุฎูุงู:

- ุชุนุฏูู ูุฏุฉ ุตูุงุญูุฉ ุงูุชููู ูู TokenManager
- ุชุฎุตูุต ุฑุณุงุฆู ุงูุฃุฎุทุงุก ูู apiService
- ุฅุถุงูุฉ middleware ุฅุถุงูู ููุทูุจุงุช
- ุชุฎุตูุต ุญุงูุงุช ุงูุชุญููู ูุงูุฃุฎุทุงุก
